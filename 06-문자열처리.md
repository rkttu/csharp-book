# 6장. 문자열 처리

문자열(String)은 프로그래밍에서 가장 빈번하게 다루는 데이터 타입 중 하나입니다. 사용자로부터 입력을 받고, 메시지를 출력하며, 파일을 읽고 쓰고, 네트워크 통신을 하는 등 거의 모든 프로그램에서 문자열 처리는 필수적입니다. 이 장에서는 C#에서 문자열을 효과적으로 다루는 다양한 방법을 학습합니다.

C#의 문자열은 불변(Immutable) 객체입니다. 즉, 한 번 생성된 문자열의 내용은 변경할 수 없으며, 수정 작업은 항상 새로운 문자열 객체를 생성합니다. 이러한 특성은 스레드 안전성과 메모리 최적화에 유리하지만, 빈번한 문자열 조작이 필요한 경우에는 `StringBuilder`를 사용하는 것이 더 효율적입니다.

## 이 장에서 배울 내용

- **문자열 기본 연산**: 문자열을 연결하고, 비교하며, 길이를 확인하는 기본적인 작업
- **문자열 메서드**: `Substring()`, `Replace()`, `Split()`, `Trim()` 등 유용한 문자열 처리 메서드
- **StringBuilder**: 빈번한 문자열 수정 작업을 효율적으로 처리하는 방법

---

## 6.1 문자열 기본 연산

문자열 처리의 가장 기본이 되는 연산들을 학습합니다. 문자열 연결, 비교, 길이 확인은 모든 문자열 처리의 토대가 됩니다.

### 6.1.1 문자열 연결

문자열 연결은 두 개 이상의 문자열을 하나로 합치는 작업입니다. C#에서는 여러 가지 방법으로 문자열을 연결할 수 있습니다.

**+ 연산자 사용:**

가장 직관적인 방법은 `+` 연산자를 사용하는 것입니다.

```csharp
string firstName = "김";
string lastName = "철수";
string fullName = firstName + lastName;

Console.WriteLine(fullName);  // 출력: 김철수

// 여러 문자열 연결
string greeting = "안녕하세요, " + fullName + "님!";
Console.WriteLine(greeting);  // 출력: 안녕하세요, 김철수님!
```

**문자열 보간 (String Interpolation):**

C# 6.0부터 도입된 문자열 보간은 가장 현대적이고 가독성이 높은 방법입니다.

```csharp
string firstName = "이";
string lastName = "영희";
int age = 25;

string message = $"{firstName}{lastName}님의 나이는 {age}세입니다.";
Console.WriteLine(message);
// 출력: 이영희님의 나이는 25세입니다.

// 표현식 사용 가능
string result = $"내년 나이: {age + 1}세";
Console.WriteLine(result);  // 출력: 내년 나이: 26세
```

**String.Concat() 메서드:**

`String.Concat()` 메서드를 사용하여 여러 문자열을 효율적으로 연결할 수 있습니다.

```csharp
string str1 = "Hello";
string str2 = " ";
string str3 = "World";
string result = String.Concat(str1, str2, str3);

Console.WriteLine(result);  // 출력: Hello World

// 배열의 모든 문자열 연결
string[] words = { "C#", "은", "강력한", "언어입니다" };
string sentence = String.Concat(words);
Console.WriteLine(sentence);  // 출력: C#은강력한언어입니다
```

**String.Join() 메서드:**

구분자를 사용하여 문자열을 연결할 때 유용합니다.

```csharp
string[] fruits = { "사과", "바나나", "오렌지" };

string result1 = String.Join(", ", fruits);
Console.WriteLine(result1);  // 출력: 사과, 바나나, 오렌지

string result2 = String.Join(" / ", fruits);
Console.WriteLine(result2);  // 출력: 사과 / 바나나 / 오렌지

// 숫자 배열도 가능
int[] numbers = { 1, 2, 3, 4, 5 };
string numberStr = String.Join("-", numbers);
Console.WriteLine(numberStr);  // 출력: 1-2-3-4-5
```

### 6.1.2 문자열 비교

문자열을 비교하는 것은 조건 분기나 검색 기능 구현에 필수적입니다. C#은 다양한 문자열 비교 방법을 제공합니다.

**== 연산자:**

가장 간단한 비교 방법으로, 대소문자를 구분합니다.

```csharp
string str1 = "Hello";
string str2 = "Hello";
string str3 = "hello";

Console.WriteLine(str1 == str2);  // 출력: True
Console.WriteLine(str1 == str3);  // 출력: False (대소문자 다름)

// null 체크
string str4 = null;
Console.WriteLine(str4 == null);  // 출력: True
```

**Equals() 메서드:**

`Equals()` 메서드는 더 명시적이고 옵션을 지정할 수 있습니다.

```csharp
string str1 = "Apple";
string str2 = "apple";

// 기본 비교 (대소문자 구분)
Console.WriteLine(str1.Equals(str2));  // 출력: False

// 대소문자 무시 비교
bool result = str1.Equals(str2, StringComparison.OrdinalIgnoreCase);
Console.WriteLine(result);  // 출력: True
```

**CompareTo() 메서드:**

문자열의 사전식 순서를 비교할 때 사용합니다. 음수, 0, 양수를 반환합니다.

```csharp
string str1 = "Apple";
string str2 = "Banana";
string str3 = "Apple";

int result1 = str1.CompareTo(str2);
Console.WriteLine(result1);  // 출력: -1 (str1이 str2보다 앞)

int result2 = str1.CompareTo(str3);
Console.WriteLine(result2);  // 출력: 0 (같음)

int result3 = str2.CompareTo(str1);
Console.WriteLine(result3);  // 출력: 1 (str2가 str1보다 뒤)

// 정렬에 활용
string[] names = { "Charlie", "Alice", "Bob" };
Array.Sort(names);
foreach (string name in names)
{
    Console.WriteLine(name);
}
// 출력:
// Alice
// Bob
// Charlie
```

**Contains() 메서드:**

문자열이 특정 부분 문자열을 포함하는지 확인합니다.

```csharp
string text = "C# 프로그래밍은 재미있습니다.";

bool hasCS = text.Contains("C#");
Console.WriteLine(hasCS);  // 출력: True

bool hasPython = text.Contains("Python");
Console.WriteLine(hasPython);  // 출력: False

// 대소문자 무시 검색 (C# 5.0 이상)
bool result = text.Contains("c#", StringComparison.OrdinalIgnoreCase);
Console.WriteLine(result);  // 출력: True
```

**StartsWith() 와 EndsWith():**

문자열이 특정 문자열로 시작하거나 끝나는지 확인합니다.

```csharp
string fileName = "document.txt";

bool isTxt = fileName.EndsWith(".txt");
Console.WriteLine(isTxt);  // 출력: True

bool isPdf = fileName.EndsWith(".pdf");
Console.WriteLine(isPdf);  // 출력: False

string url = "https://www.example.com";
bool isHttps = url.StartsWith("https");
Console.WriteLine(isHttps);  // 출력: True
```

### 6.1.3 문자열 길이

문자열의 길이는 `Length` 속성을 통해 확인할 수 있습니다. 이는 유효성 검사, 반복 처리 등에 자주 사용됩니다.

**Length 속성:**

```csharp
string text = "Hello, World!";
int length = text.Length;

Console.WriteLine($"문자열 길이: {length}");  // 출력: 문자열 길이: 13

// 빈 문자열
string empty = "";
Console.WriteLine(empty.Length);  // 출력: 0

// 한글도 한 글자씩 계산
string korean = "안녕하세요";
Console.WriteLine(korean.Length);  // 출력: 5
```

**실용 예제: 비밀번호 길이 검증**

```csharp
Console.Write("비밀번호를 입력하세요 (8자 이상): ");
string password = Console.ReadLine();

if (password.Length < 8)
{
    Console.WriteLine("비밀번호는 최소 8자 이상이어야 합니다.");
}
else
{
    Console.WriteLine("유효한 비밀번호입니다.");
}
```

**문자열이 비어있는지 확인:**

```csharp
string str1 = "";
string str2 = "   ";
string str3 = null;

// 빈 문자열 확인
Console.WriteLine(str1.Length == 0);  // 출력: True
Console.WriteLine(String.IsNullOrEmpty(str1));  // 출력: True

// 공백만 있는 문자열
Console.WriteLine(str2.Length == 0);  // 출력: False
Console.WriteLine(String.IsNullOrWhiteSpace(str2));  // 출력: True

// null 문자열 (Length 호출 시 오류 발생)
// Console.WriteLine(str3.Length);  // ❌ NullReferenceException
Console.WriteLine(String.IsNullOrEmpty(str3));  // 출력: True
```

**문자열 자르기와 길이:**

```csharp
string longText = "이것은 매우 긴 텍스트입니다.";

// 특정 길이까지만 표시
int maxLength = 10;
if (longText.Length > maxLength)
{
    string shortened = longText.Substring(0, maxLength) + "...";
    Console.WriteLine(shortened);  // 출력: 이것은 매우 긴 텍...
}
```

---

## 6.2 문자열 메서드

C#의 `String` 클래스는 문자열 처리를 위한 다양한 유용한 메서드를 제공합니다. 이들을 잘 활용하면 복잡한 문자열 처리 작업을 간단하게 수행할 수 있습니다.

### 6.2.1 Substring()

`Substring()` 메서드는 문자열의 일부분을 추출합니다. 시작 위치와 길이를 지정할 수 있습니다.

**기본 사용법:**

```csharp
string text = "Hello, World!";

// 인덱스 7부터 끝까지
string sub1 = text.Substring(7);
Console.WriteLine(sub1);  // 출력: World!

// 인덱스 0부터 5글자
string sub2 = text.Substring(0, 5);
Console.WriteLine(sub2);  // 출력: Hello

// 인덱스 7부터 5글자
string sub3 = text.Substring(7, 5);
Console.WriteLine(sub3);  // 출력: World
```

**실용 예제: 날짜 문자열 파싱**

```csharp
string dateStr = "2024-11-14";

string year = dateStr.Substring(0, 4);
string month = dateStr.Substring(5, 2);
string day = dateStr.Substring(8, 2);

Console.WriteLine($"연도: {year}");  // 출력: 연도: 2024
Console.WriteLine($"월: {month}");    // 출력: 월: 11
Console.WriteLine($"일: {day}");      // 출력: 일: 14
```

**실용 예제: 파일 확장자 추출**

```csharp
string fileName = "document.pdf";
int dotIndex = fileName.LastIndexOf('.');

if (dotIndex >= 0)
{
    string extension = fileName.Substring(dotIndex);
    Console.WriteLine($"확장자: {extension}");  // 출력: 확장자: .pdf
}
```

**주의사항:**

```csharp
string text = "Hello";

// 범위를 벗어나면 예외 발생
try
{
    string invalid = text.Substring(10);  // ❌ ArgumentOutOfRangeException
}
catch (ArgumentOutOfRangeException)
{
    Console.WriteLine("인덱스가 범위를 벗어났습니다.");
}
```

### 6.2.2 Replace()

`Replace()` 메서드는 문자열 내의 특정 문자나 문자열을 다른 것으로 치환합니다.

**기본 사용법:**

```csharp
string text = "Hello, World!";

// 단일 문자 교체
string result1 = text.Replace('o', 'O');
Console.WriteLine(result1);  // 출력: HellO, WOrld!

// 문자열 교체
string result2 = text.Replace("World", "C#");
Console.WriteLine(result2);  // 출력: Hello, C#!

// 여러 번 치환
string text2 = "apple, apple, apple";
string result3 = text2.Replace("apple", "orange");
Console.WriteLine(result3);  // 출력: orange, orange, orange
```

**실용 예제: 공백 제거**

```csharp
string text = "Hello World Programming";

// 모든 공백 제거
string noSpaces = text.Replace(" ", "");
Console.WriteLine(noSpaces);  // 출력: HelloWorldProgramming

// 공백을 밑줄로 변경
string withUnderscore = text.Replace(" ", "_");
Console.WriteLine(withUnderscore);  // 출력: Hello_World_Programming
```

**실용 예제: 민감 정보 마스킹**

```csharp
string creditCard = "1234-5678-9012-3456";

// 중간 숫자를 별표로 치환
string masked = creditCard.Substring(0, 5) + "****-****" + creditCard.Substring(14);
Console.WriteLine(masked);  // 출력: 1234-****-****-3456
```

**연쇄 치환:**

```csharp
string text = "Hello, World!";

// 여러 치환을 연속으로 수행
string result = text.Replace("Hello", "Hi")
                   .Replace("World", "C#")
                   .Replace("!", ".");

Console.WriteLine(result);  // 출력: Hi, C#.
```

### 6.2.3 Split()

`Split()` 메서드는 문자열을 지정된 구분자로 나누어 문자열 배열로 반환합니다.

**기본 사용법:**

```csharp
string text = "apple,banana,orange";

string[] fruits = text.Split(',');

foreach (string fruit in fruits)
{
    Console.WriteLine(fruit);
}
// 출력:
// apple
// banana
// orange

Console.WriteLine($"과일 개수: {fruits.Length}");  // 출력: 과일 개수: 3
```

**여러 구분자 사용:**

```csharp
string text = "apple,banana;orange|grape";

// 여러 구분자 지정
char[] separators = { ',', ';', '|' };
string[] fruits = text.Split(separators);

foreach (string fruit in fruits)
{
    Console.WriteLine(fruit);
}
// 출력:
// apple
// banana
// orange
// grape
```

**공백으로 분리:**

```csharp
string sentence = "C# is a powerful language";

string[] words = sentence.Split(' ');

foreach (string word in words)
{
    Console.WriteLine(word);
}
// 출력:
// C#
// is
// a
// powerful
// language
```

**빈 항목 제거:**

```csharp
string text = "apple,,banana,,,orange";

// 기본 Split - 빈 항목 포함
string[] fruits1 = text.Split(',');
Console.WriteLine($"항목 개수: {fruits1.Length}");  // 출력: 항목 개수: 6

// 빈 항목 제거
string[] fruits2 = text.Split(',', StringSplitOptions.RemoveEmptyEntries);
Console.WriteLine($"항목 개수: {fruits2.Length}");  // 출력: 항목 개수: 3

foreach (string fruit in fruits2)
{
    Console.WriteLine(fruit);
}
// 출력:
// apple
// banana
// orange
```

**실용 예제: CSV 데이터 파싱**

```csharp
string csvLine = "홍길동,30,서울";

string[] data = csvLine.Split(',');

string name = data[0];
int age = int.Parse(data[1]);
string city = data[2];

Console.WriteLine($"이름: {name}");  // 출력: 이름: 홍길동
Console.WriteLine($"나이: {age}");   // 출력: 나이: 30
Console.WriteLine($"도시: {city}");  // 출력: 도시: 서울
```

**실용 예제: 경로 분리**

```csharp
string path = "C:/Users/Username/Documents/file.txt";

string[] parts = path.Split('/');

Console.WriteLine("경로 구성 요소:");
foreach (string part in parts)
{
    Console.WriteLine($"  - {part}");
}
// 출력:
// 경로 구성 요소:
//   - C:
//   - Users
//   - Username
//   - Documents
//   - file.txt
```

### 6.2.4 Trim(), ToUpper(), ToLower()

이들 메서드는 문자열의 공백을 제거하거나 대소문자를 변환하는 데 사용됩니다.

**Trim() - 앞뒤 공백 제거:**

```csharp
string text = "   Hello, World!   ";

string trimmed = text.Trim();
Console.WriteLine($"원본: '{text}'");      // 출력: 원본: '   Hello, World!   '
Console.WriteLine($"Trim: '{trimmed}'");  // 출력: Trim: 'Hello, World!'

// 앞쪽 공백만 제거
string leftTrimmed = text.TrimStart();
Console.WriteLine($"TrimStart: '{leftTrimmed}'");  // 출력: TrimStart: 'Hello, World!   '

// 뒤쪽 공백만 제거
string rightTrimmed = text.TrimEnd();
Console.WriteLine($"TrimEnd: '{rightTrimmed}'");   // 출력: TrimEnd: '   Hello, World!'
```

**특정 문자 제거:**

```csharp
string text = "***Hello***";

// 특정 문자 제거
string result = text.Trim('*');
Console.WriteLine(result);  // 출력: Hello

// 여러 문자 제거
string text2 = "##Hello##World##";
char[] charsToTrim = { '#' };
string result2 = text2.Trim(charsToTrim);
Console.WriteLine(result2);  // 출력: Hello##World
```

**ToUpper() - 대문자 변환:**

```csharp
string text = "Hello, World!";

string upper = text.ToUpper();
Console.WriteLine(upper);  // 출력: HELLO, WORLD!

// 실용 예제: 대소문자 무시 비교
string input = "yes";
if (input.ToUpper() == "YES")
{
    Console.WriteLine("긍정 응답입니다.");
}
```

**ToLower() - 소문자 변환:**

```csharp
string text = "Hello, World!";

string lower = text.ToLower();
Console.WriteLine(lower);  // 출력: hello, world!

// 실용 예제: 이메일 정규화
string email = "User@Example.COM";
string normalizedEmail = email.ToLower();
Console.WriteLine(normalizedEmail);  // 출력: user@example.com
```

**실용 예제: 사용자 입력 처리**

```csharp
Console.Write("계속하시겠습니까? (yes/no): ");
string input = Console.ReadLine();

// 공백 제거 및 소문자 변환
string normalized = input.Trim().ToLower();

if (normalized == "yes" || normalized == "y")
{
    Console.WriteLine("계속 진행합니다.");
}
else if (normalized == "no" || normalized == "n")
{
    Console.WriteLine("종료합니다.");
}
else
{
    Console.WriteLine("잘못된 입력입니다.");
}
```

**문화권 고려 변환:**

```csharp
using System.Globalization;

string text = "türkiye";  // 터키어

// 현재 문화권 기준
string upper1 = text.ToUpper();
Console.WriteLine(upper1);

// 특정 문화권 기준
string upper2 = text.ToUpper(new CultureInfo("tr-TR"));
Console.WriteLine(upper2);

// 불변 문화권 기준 (권장)
string upper3 = text.ToUpperInvariant();
Console.WriteLine(upper3);
```

---

## 6.3 StringBuilder

`StringBuilder`는 빈번한 문자열 수정 작업을 효율적으로 처리하기 위한 클래스입니다. 일반 문자열의 불변성 때문에 발생하는 성능 문제를 해결합니다.

### 6.3.1 StringBuilder의 필요성

**문자열의 불변성과 성능 문제:**

일반 문자열은 불변이므로, 문자열을 수정할 때마다 새로운 문자열 객체가 생성됩니다. 이는 메모리 낭비와 성능 저하를 초래합니다.

```csharp
// 비효율적인 방식 - 반복적인 문자열 연결
string result = "";
for (int i = 1; i <= 5; i++)
{
    result += i + " ";  // 매번 새로운 문자열 객체 생성
}
Console.WriteLine(result);  // 출력: 1 2 3 4 5

// 위 코드는 다음과 같이 동작:
// 1회: "" + "1 " → 새 문자열 "1 "
// 2회: "1 " + "2 " → 새 문자열 "1 2 "
// 3회: "1 2 " + "3 " → 새 문자열 "1 2 3 "
// ...
// 총 5개의 임시 문자열 객체 생성
```

**StringBuilder의 장점:**

`StringBuilder`는 내부 버퍼를 사용하여 문자열을 조작하므로, 매번 새로운 객체를 생성하지 않습니다.

```csharp
using System.Text;

// 효율적인 방식 - StringBuilder 사용
StringBuilder sb = new StringBuilder();
for (int i = 1; i <= 5; i++)
{
    sb.Append(i);
    sb.Append(" ");
}
string result = sb.ToString();
Console.WriteLine(result);  // 출력: 1 2 3 4 5
```

**성능 비교 예제:**

```csharp
using System.Text;
using System.Diagnostics;

int iterations = 10000;

// String 연결 방식
Stopwatch sw1 = Stopwatch.StartNew();
string str = "";
for (int i = 0; i < iterations; i++)
{
    str += "a";
}
sw1.Stop();
Console.WriteLine($"String 연결: {sw1.ElapsedMilliseconds}ms");

// StringBuilder 방식
Stopwatch sw2 = Stopwatch.StartNew();
StringBuilder sb = new StringBuilder();
for (int i = 0; i < iterations; i++)
{
    sb.Append("a");
}
string result = sb.ToString();
sw2.Stop();
Console.WriteLine($"StringBuilder: {sw2.ElapsedMilliseconds}ms");

// StringBuilder가 훨씬 빠름 (특히 iterations가 클수록)
```

**언제 StringBuilder를 사용할까:**

- 반복문 내에서 문자열을 계속 수정하는 경우
- 대량의 문자열 조합이 필요한 경우
- 동적으로 생성되는 긴 텍스트를 만들 때

**언제 일반 문자열을 사용할까:**

- 한두 번의 간단한 연결만 필요한 경우
- 문자열 보간(`$""`)으로 충분한 경우
- 문자열을 읽기만 하는 경우

### 6.3.2 효율적인 문자열 조작

`StringBuilder`는 문자열을 효율적으로 조작할 수 있는 다양한 메서드를 제공합니다.

**기본 사용법:**

```csharp
using System.Text;

// StringBuilder 생성
StringBuilder sb = new StringBuilder();

// 문자열 추가
sb.Append("Hello");
sb.Append(" ");
sb.Append("World");

// 문자열로 변환
string result = sb.ToString();
Console.WriteLine(result);  // 출력: Hello World
```

**초기 용량 지정:**

예상되는 문자열 길이를 미리 지정하면 성능이 더 향상됩니다.

```csharp
// 초기 용량을 100으로 설정
StringBuilder sb = new StringBuilder(100);

// 초기 문자열과 용량 지정
StringBuilder sb2 = new StringBuilder("Initial text", 200);
```

**주요 메서드:**

```csharp
using System.Text;

StringBuilder sb = new StringBuilder();

// Append: 끝에 추가
sb.Append("Hello");
sb.Append(" ");
sb.Append("World");
Console.WriteLine(sb.ToString());  // 출력: Hello World

// AppendLine: 줄바꿈과 함께 추가
sb.Clear();  // 내용 비우기
sb.AppendLine("첫 번째 줄");
sb.AppendLine("두 번째 줄");
sb.AppendLine("세 번째 줄");
Console.WriteLine(sb.ToString());
// 출력:
// 첫 번째 줄
// 두 번째 줄
// 세 번째 줄

// Insert: 특정 위치에 삽입
sb.Clear();
sb.Append("Hello World");
sb.Insert(5, ",");
Console.WriteLine(sb.ToString());  // 출력: Hello, World

// Remove: 특정 범위 제거
sb.Clear();
sb.Append("Hello World");
sb.Remove(5, 6);  // 인덱스 5부터 6글자 제거
Console.WriteLine(sb.ToString());  // 출력: Hello

// Replace: 문자열 치환
sb.Clear();
sb.Append("Hello World");
sb.Replace("World", "C#");
Console.WriteLine(sb.ToString());  // 출력: Hello C#
```

**메서드 체이닝:**

대부분의 `StringBuilder` 메서드는 자기 자신을 반환하므로, 메서드를 연쇄적으로 호출할 수 있습니다.

```csharp
using System.Text;

string result = new StringBuilder()
    .Append("Hello")
    .Append(" ")
    .Append("World")
    .Append("!")
    .ToString();

Console.WriteLine(result);  // 출력: Hello World!

// 복잡한 예제
StringBuilder sb = new StringBuilder()
    .AppendLine("=== 보고서 ===")
    .AppendLine()
    .Append("제목: ")
    .AppendLine("월간 보고서")
    .Append("날짜: ")
    .AppendLine(DateTime.Now.ToString("yyyy-MM-dd"))
    .AppendLine()
    .AppendLine("내용: ...")
    .ToString();

Console.WriteLine(sb);
```

**실용 예제: HTML 생성**

```csharp
using System.Text;

StringBuilder html = new StringBuilder();

html.AppendLine("<html>");
html.AppendLine("  <head>");
html.AppendLine("    <title>My Page</title>");
html.AppendLine("  </head>");
html.AppendLine("  <body>");
html.AppendLine("    <h1>Welcome</h1>");
html.AppendLine("    <p>This is a paragraph.</p>");
html.AppendLine("  </body>");
html.AppendLine("</html>");

string htmlContent = html.ToString();
Console.WriteLine(htmlContent);
```

**실용 예제: 로그 메시지 생성**

```csharp
using System.Text;

void LogMessage(string level, string message)
{
    StringBuilder log = new StringBuilder();
    
    log.Append("[");
    log.Append(DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss"));
    log.Append("] ");
    log.Append($"[{level}] ");
    log.Append(message);
    
    Console.WriteLine(log.ToString());
}

LogMessage("INFO", "애플리케이션 시작");
LogMessage("WARNING", "메모리 사용량이 높습니다");
LogMessage("ERROR", "데이터베이스 연결 실패");

// 출력:
// [2024-11-14 10:30:45] [INFO] 애플리케이션 시작
// [2024-11-14 10:30:46] [WARNING] 메모리 사용량이 높습니다
// [2024-11-14 10:30:47] [ERROR] 데이터베이스 연결 실패
```

**실용 예제: CSV 생성**

```csharp
using System.Text;

// 학생 데이터를 CSV 형식으로 변환
string[][] students = new string[][]
{
    new string[] { "홍길동", "25", "서울" },
    new string[] { "김철수", "23", "부산" },
    new string[] { "이영희", "27", "대구" }
};

StringBuilder csv = new StringBuilder();

// 헤더
csv.AppendLine("이름,나이,도시");

// 데이터 행
foreach (string[] student in students)
{
    csv.AppendLine(String.Join(",", student));
}

string csvContent = csv.ToString();
Console.WriteLine(csvContent);
// 출력:
// 이름,나이,도시
// 홍길동,25,서울
// 김철수,23,부산
// 이영희,27,대구
```

**용량 관리:**

```csharp
using System.Text;

StringBuilder sb = new StringBuilder();

Console.WriteLine($"초기 용량: {sb.Capacity}");  // 출력: 초기 용량: 16
Console.WriteLine($"현재 길이: {sb.Length}");    // 출력: 현재 길이: 0

sb.Append("Hello World");
Console.WriteLine($"추가 후 용량: {sb.Capacity}");  // 출력: 추가 후 용량: 16
Console.WriteLine($"추가 후 길이: {sb.Length}");    // 출력: 추가 후 길이: 11

// 용량이 부족하면 자동으로 증가
for (int i = 0; i < 100; i++)
{
    sb.Append("x");
}
Console.WriteLine($"최종 용량: {sb.Capacity}");  // 출력: 최종 용량: 128 (자동 증가)
Console.WriteLine($"최종 길이: {sb.Length}");    // 출력: 최종 길이: 111
```

---

## 마무리

이 장에서는 C#에서 문자열을 효과적으로 처리하는 다양한 방법을 학습했습니다. 문자열 연결, 비교, 길이 확인 같은 기본 연산부터 `Substring()`, `Replace()`, `Split()`, `Trim()` 같은 유용한 메서드들, 그리고 대량의 문자열 조작이 필요할 때 사용하는 `StringBuilder`까지 다루었습니다.

**핵심 정리:**

✅ **기본 연산**: 문자열 연결(`+`, 문자열 보간, `String.Concat()`, `String.Join()`), 비교(`==`, `Equals()`, `CompareTo()`), 길이(`Length`)
✅ **문자열 메서드**: `Substring()`, `Replace()`, `Split()`, `Trim()`, `ToUpper()`, `ToLower()`
✅ **StringBuilder**: 빈번한 문자열 수정 시 성능 최적화, `Append()`, `Insert()`, `Remove()`, `Replace()` 메서드

**실전 활용 팁:**

1. **소수의 연결**: 문자열 보간(`$""`) 사용
2. **반복문 내 연결**: `StringBuilder` 사용
3. **대소문자 무시 비교**: `StringComparison.OrdinalIgnoreCase` 옵션 활용
4. **입력 검증**: `Trim()`, `IsNullOrEmpty()`, `IsNullOrWhiteSpace()` 활용
5. **데이터 파싱**: `Split()` 메서드로 간단하게 처리

**다음 단계:**

7장에서는 메서드의 기초를 학습하여 코드를 재사용 가능한 단위로 구조화하는 방법을 배우게 됩니다. 문자열 처리 로직을 메서드로 분리하면 코드의 가독성과 유지보수성이 크게 향상됩니다.

**연습 문제:**

#### 문제 1: 이메일 유효성 검사

사용자로부터 이메일 주소를 입력받아, `@` 기호가 포함되어 있고 `.`도 포함되어 있는지 확인하는 프로그램을 작성하세요.

```csharp
Console.Write("이메일 주소를 입력하세요: ");
string email = Console.ReadLine().Trim();

bool hasAt = email.Contains("@");
bool hasDot = email.Contains(".");
bool isValid = hasAt && hasDot && email.Length > 0;

if (isValid)
{
    Console.WriteLine("유효한 이메일 주소입니다.");
}
else
{
    Console.WriteLine("잘못된 이메일 주소입니다.");
}
```

#### 문제 2: 단어 개수 세기

문장을 입력받아 공백으로 구분된 단어의 개수를 세는 프로그램을 작성하세요.

```csharp
Console.Write("문장을 입력하세요: ");
string sentence = Console.ReadLine();

string[] words = sentence.Split(' ', StringSplitOptions.RemoveEmptyEntries);
int wordCount = words.Length;

Console.WriteLine($"단어 개수: {wordCount}");
```

#### 문제 3: 텍스트 변환기

사용자로부터 텍스트를 입력받아 다음 변환을 수행하는 프로그램을 작성하세요:
- 모든 공백을 밑줄(`_`)로 변경
- 모든 문자를 대문자로 변환
- 양 끝 공백 제거

```csharp
Console.Write("텍스트를 입력하세요: ");
string text = Console.ReadLine();

string processed = text.Trim()
                       .Replace(" ", "_")
                       .ToUpper();

Console.WriteLine($"변환 결과: {processed}");
```

#### 문제 4: StringBuilder로 구구단 생성

`StringBuilder`를 사용하여 2단부터 9단까지의 구구단을 문자열로 생성하는 프로그램을 작성하세요.

```csharp
using System.Text;

StringBuilder sb = new StringBuilder();

for (int dan = 2; dan <= 9; dan++)
{
    sb.AppendLine($"=== {dan}단 ===");
    for (int num = 1; num <= 9; num++)
    {
        sb.AppendLine($"{dan} × {num} = {dan * num}");
    }
    sb.AppendLine();
}

string result = sb.ToString();
Console.WriteLine(result);
```
