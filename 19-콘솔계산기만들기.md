# 19장. 콘솔 계산기 만들기

콘솔 계산기는 지금까지 배운 C#의 핵심 개념들을 실전에 적용하는 첫 번째 통합 프로젝트입니다. 변수, 연산자, 제어문, 메서드, 예외 처리, 컬렉션 등 이전 장들에서 학습한 내용을 하나의 실용적인 애플리케이션으로 결합하여, 실제로 동작하는 프로그램을 만들어 봅니다.

**계산기 프로그램의 교육적 가치:**

계산기는 프로그래밍 학습에 있어 이상적인 첫 번째 프로젝트입니다. 기능이 명확하고, 사용자 입출력을 다루며, 오류 처리가 필요하고, 점진적으로 확장할 수 있는 구조를 가지고 있습니다. 또한 실생활에서 사용되는 도구를 직접 만들어 봄으로써, 프로그래밍이 추상적인 개념이 아닌 실용적인 기술임을 체감할 수 있습니다.

**프로젝트 기반 학습(Project-Based Learning)의 중요성:**

개별 문법 요소를 학습하는 것과 이를 실제 프로그램으로 통합하는 것은 전혀 다른 능력입니다. 프로젝트 기반 학습은:
- **문맥 속에서의 이해**: 각 개념이 실제로 어떻게 사용되는지 보여줍니다
- **문제 해결 능력**: 요구사항을 코드로 변환하는 실무 능력을 기릅니다
- **설계 사고**: 프로그램 구조를 계획하고 모듈화하는 방법을 배웁니다
- **디버깅 경험**: 실제 오류를 만나고 해결하는 과정을 경험합니다

이 장에서는 단순한 사칙연산 계산기에서 시작하여, 메뉴 시스템, 예외 처리, 연산 기록 기능을 단계적으로 추가하며, 소프트웨어가 진화하는 과정을 경험하게 됩니다.

## 이 장에서 배울 내용

- **요구사항 분석**: 프로그램이 해야 할 일을 명확히 정의하고 단계별로 나누는 방법
- **기본 연산 구현**: 사용자 입력을 받아 사칙연산을 수행하는 핵심 로직 작성
- **메뉴 시스템**: 사용자가 원하는 기능을 선택할 수 있는 인터페이스 구현
- **예외 처리**: 잘못된 입력이나 오류 상황을 안전하게 처리하는 방법
- **연산 기록**: 이전 계산 결과를 저장하고 조회하는 기능 구현

---

## 19.1 요구사항 분석

소프트웨어 개발의 첫 번째 단계는 **무엇을 만들 것인가**를 명확히 정의하는 것입니다. 요구사항 분석(Requirements Analysis)은 프로그램이 제공해야 할 기능과 동작 방식을 구체화하는 과정입니다.

**요구사항 분석의 중요성:**

코드를 작성하기 전에 요구사항을 명확히 하지 않으면:
- 개발 중간에 방향이 바뀌어 시간을 낭비하게 됩니다
- 필요한 기능이 누락되거나 불필요한 기능을 만들게 됩니다
- 프로그램 구조가 복잡해지고 유지보수가 어려워집니다

**좋은 요구사항의 특징:**
- **명확성(Clear)**: 모호하지 않고 구체적입니다
- **검증 가능성(Testable)**: 구현 여부를 확인할 수 있습니다
- **실현 가능성(Feasible)**: 현재 기술 수준으로 구현 가능합니다
- **추적 가능성(Traceable)**: 코드의 어느 부분이 어떤 요구사항을 만족하는지 알 수 있습니다

### 계산기의 핵심 기능 정의

우리가 만들 콘솔 계산기의 기본 요구사항은 다음과 같습니다:

**1. 사칙연산 지원**
- 덧셈 (+)
- 뺄셈 (-)
- 곱셈 (*)
- 나눗셈 (/)

**2. 사용자 인터페이스**
- 두 개의 숫자와 연산자를 입력받습니다
- 계산 결과를 화면에 표시합니다
- 계속 사용할지 종료할지 선택할 수 있습니다

**3. 오류 처리**
- 잘못된 입력(숫자가 아닌 문자)을 처리합니다
- 0으로 나누기 오류를 방지합니다
- 오류 발생 시 적절한 메시지를 표시합니다

**4. 추가 기능**
- 이전 계산 결과를 저장하고 조회합니다
- 메뉴를 통해 다양한 기능에 접근합니다

### 단계별 개발 계획

복잡한 프로그램도 작은 단계로 나누면 관리하기 쉬워집니다. **증분 개발(Incremental Development)** 방식으로 접근합니다:

**단계 1: 최소 기능 프로토타입(Minimum Viable Product)**
```
사용자로부터 두 숫자를 입력받아 더하는 프로그램
```

**단계 2: 사칙연산 확장**
```
네 가지 기본 연산(+, -, *, /)을 모두 지원
```

**단계 3: 메뉴 시스템 추가**
```
사용자가 원하는 작업을 선택할 수 있는 메뉴
```

**단계 4: 예외 처리 강화**
```
모든 잘못된 입력을 안전하게 처리
```

**단계 5: 연산 기록 기능**
```
이전 계산 내역을 저장하고 조회
```

### 프로그램 흐름 설계

프로그램의 전체 흐름을 간단한 **순서도(Flowchart)** 또는 **의사코드(Pseudocode)**로 표현하면 구현이 쉬워집니다.

**기본 흐름:**
```
1. 프로그램 시작
2. 환영 메시지 출력
3. 반복:
   a. 메뉴 표시
   b. 사용자 선택 입력
   c. 선택에 따라 기능 실행:
      - 계산: 두 숫자와 연산자 입력 → 계산 → 결과 출력
      - 기록 보기: 이전 계산 내역 출력
      - 종료: 프로그램 종료
   d. 종료가 아니면 3으로 돌아감
4. 프로그램 종료
```

**의사코드 예시:**
```
프로그램 시작
  계산 기록 리스트 초기화
  
  무한 반복:
    메뉴 표시 (1: 계산, 2: 기록 보기, 3: 종료)
    사용자 선택 입력받기
    
    만약 선택 == 1이면:
      첫 번째 숫자 입력받기
      연산자 입력받기
      두 번째 숫자 입력받기
      계산 수행
      결과 출력 및 기록에 저장
    
    만약 선택 == 2이면:
      저장된 기록 모두 출력
    
    만약 선택 == 3이면:
      종료 메시지 출력
      반복 탈출
    
    그 외:
      잘못된 선택 메시지 출력
프로그램 종료
```

---

## 19.2 기본 연산 구현

계산기의 핵심은 사칙연산입니다. 먼저 가장 단순한 형태부터 시작하여 점진적으로 기능을 확장해 나갑니다.

### 최소 기능 버전 - 덧셈 계산기

가장 간단한 형태의 계산기는 두 숫자를 입력받아 더하는 것입니다:

```csharp
Console.WriteLine("=== 간단한 계산기 ===");

Console.Write("첫 번째 숫자를 입력하세요: ");
string input1 = Console.ReadLine();

Console.Write("두 번째 숫자를 입력하세요: ");
string input2 = Console.ReadLine();

double num1 = double.Parse(input1);
double num2 = double.Parse(input2);

double result = num1 + num2;

Console.WriteLine($"{num1} + {num2} = {result}");
```

**실행 예시:**
```
=== 간단한 계산기 ===
첫 번째 숫자를 입력하세요: 10
두 번째 숫자를 입력하세요: 5
10 + 5 = 15
```

**코드 분석:**
- `Console.ReadLine()`으로 사용자 입력을 받습니다 (문자열 형태)
- `double.Parse()`로 문자열을 숫자로 변환합니다
- 덧셈 연산을 수행하고 결과를 출력합니다

### 사칙연산 지원 확장

이제 네 가지 연산을 모두 지원하도록 확장합니다. 연산자를 입력받아 `switch` 문으로 처리합니다:

```csharp
Console.WriteLine("=== 사칙연산 계산기 ===");

Console.Write("첫 번째 숫자: ");
double num1 = double.Parse(Console.ReadLine());

Console.Write("연산자 (+, -, *, /): ");
string op = Console.ReadLine();

Console.Write("두 번째 숫자: ");
double num2 = double.Parse(Console.ReadLine());

double result = 0;

switch (op)
{
    case "+":
        result = num1 + num2;
        break;
    case "-":
        result = num1 - num2;
        break;
    case "*":
        result = num1 * num2;
        break;
    case "/":
        result = num1 / num2;
        break;
    default:
        Console.WriteLine("잘못된 연산자입니다.");
        return;
}

Console.WriteLine($"{num1} {op} {num2} = {result}");
```

**실행 예시:**
```
=== 사칙연산 계산기 ===
첫 번째 숫자: 20
연산자 (+, -, *, /): *
두 번째 숫자: 3
20 * 3 = 60
```

### 메서드로 연산 분리

코드를 더 체계적으로 만들기 위해 각 연산을 별도의 메서드로 분리합니다:

```csharp
double Add(double a, double b)
{
    return a + b;
}

double Subtract(double a, double b)
{
    return a - b;
}

double Multiply(double a, double b)
{
    return a * b;
}

double Divide(double a, double b)
{
    return a / b;
}

// 메인 로직
Console.Write("첫 번째 숫자: ");
double num1 = double.Parse(Console.ReadLine());

Console.Write("연산자 (+, -, *, /): ");
string op = Console.ReadLine();

Console.Write("두 번째 숫자: ");
double num2 = double.Parse(Console.ReadLine());

double result = op switch
{
    "+" => Add(num1, num2),
    "-" => Subtract(num1, num2),
    "*" => Multiply(num1, num2),
    "/" => Divide(num1, num2),
    _ => throw new InvalidOperationException("잘못된 연산자")
};

Console.WriteLine($"{num1} {op} {num2} = {result}");
```

**메서드 분리의 장점:**
- **가독성**: 각 연산의 의도가 명확해집니다
- **재사용성**: 다른 곳에서도 같은 메서드를 사용할 수 있습니다
- **유지보수**: 특정 연산의 로직만 수정하기 쉽습니다
- **테스트**: 각 메서드를 독립적으로 테스트할 수 있습니다

---

## 19.3 메뉴 시스템 추가

사용자가 여러 작업 중에서 원하는 것을 선택할 수 있도록 메뉴 시스템을 구현합니다. 이는 프로그램의 **사용자 인터페이스(UI)**를 개선하는 중요한 단계입니다.

### 기본 메뉴 구조

메뉴는 일반적으로 무한 루프(`while (true)`)와 `switch` 문을 조합하여 구현합니다:

```csharp
Console.WriteLine("=== 콘솔 계산기 ===");

while (true)
{
    Console.WriteLine("\n메뉴:");
    Console.WriteLine("1. 계산하기");
    Console.WriteLine("2. 종료");
    Console.Write("선택: ");
    
    string choice = Console.ReadLine();
    
    switch (choice)
    {
        case "1":
            PerformCalculation();
            break;
        case "2":
            Console.WriteLine("프로그램을 종료합니다.");
            return;
        default:
            Console.WriteLine("잘못된 선택입니다. 다시 선택해주세요.");
            break;
    }
}

void PerformCalculation()
{
    Console.Write("첫 번째 숫자: ");
    double num1 = double.Parse(Console.ReadLine());
    
    Console.Write("연산자 (+, -, *, /): ");
    string op = Console.ReadLine();
    
    Console.Write("두 번째 숫자: ");
    double num2 = double.Parse(Console.ReadLine());
    
    double result = op switch
    {
        "+" => num1 + num2,
        "-" => num1 - num2,
        "*" => num1 * num2,
        "/" => num1 / num2,
        _ => throw new InvalidOperationException("잘못된 연산자")
    };
    
    Console.WriteLine($"\n결과: {num1} {op} {num2} = {result}");
}
```

**실행 예시:**
```
=== 콘솔 계산기 ===

메뉴:
1. 계산하기
2. 종료
선택: 1
첫 번째 숫자: 15
연산자 (+, -, *, /): -
두 번째 숫자: 7

결과: 15 - 7 = 8

메뉴:
1. 계산하기
2. 종료
선택: 2
프로그램을 종료합니다.
```

### 확장된 메뉴 - 여러 기능 추가

계산 외에 다른 기능도 추가해봅니다:

```csharp
Console.WriteLine("=== 고급 계산기 ===");

while (true)
{
    Console.WriteLine("\n━━━━━━━━━━━━━━━━━━━━━━");
    Console.WriteLine("  1. 사칙연산");
    Console.WriteLine("  2. 제곱 계산");
    Console.WriteLine("  3. 제곱근 계산");
    Console.WriteLine("  4. 도움말");
    Console.WriteLine("  5. 종료");
    Console.WriteLine("━━━━━━━━━━━━━━━━━━━━━━");
    Console.Write("선택 (1-5): ");
    
    string choice = Console.ReadLine();
    
    switch (choice)
    {
        case "1":
            BasicCalculation();
            break;
        case "2":
            PowerCalculation();
            break;
        case "3":
            SqrtCalculation();
            break;
        case "4":
            ShowHelp();
            break;
        case "5":
            Console.WriteLine("\n프로그램을 종료합니다. 감사합니다!");
            return;
        default:
            Console.WriteLine("\n❌ 잘못된 선택입니다. 1-5 사이의 숫자를 입력하세요.");
            break;
    }
}

void BasicCalculation()
{
    Console.WriteLine("\n[ 사칙연산 ]");
    Console.Write("첫 번째 숫자: ");
    double a = double.Parse(Console.ReadLine());
    
    Console.Write("연산자 (+, -, *, /): ");
    string op = Console.ReadLine();
    
    Console.Write("두 번째 숫자: ");
    double b = double.Parse(Console.ReadLine());
    
    double result = op switch
    {
        "+" => a + b,
        "-" => a - b,
        "*" => a * b,
        "/" => a / b,
        _ => throw new InvalidOperationException("지원하지 않는 연산자")
    };
    
    Console.WriteLine($"✓ 결과: {a} {op} {b} = {result}");
}

void PowerCalculation()
{
    Console.WriteLine("\n[ 제곱 계산 ]");
    Console.Write("밑(base): ");
    double baseNum = double.Parse(Console.ReadLine());
    
    Console.Write("지수(exponent): ");
    double exp = double.Parse(Console.ReadLine());
    
    double result = Math.Pow(baseNum, exp);
    Console.WriteLine($"✓ 결과: {baseNum}^{exp} = {result}");
}

void SqrtCalculation()
{
    Console.WriteLine("\n[ 제곱근 계산 ]");
    Console.Write("숫자: ");
    double num = double.Parse(Console.ReadLine());
    
    double result = Math.Sqrt(num);
    Console.WriteLine($"✓ 결과: √{num} = {result}");
}

void ShowHelp()
{
    Console.WriteLine("\n[ 도움말 ]");
    Console.WriteLine("이 계산기는 다음 기능을 제공합니다:");
    Console.WriteLine("• 사칙연산: 덧셈(+), 뺄셈(-), 곱셈(*), 나눗셈(/)");
    Console.WriteLine("• 제곱: 밑과 지수를 입력하여 거듭제곱 계산");
    Console.WriteLine("• 제곱근: 양수의 제곱근 계산");
    Console.WriteLine("\n💡 팁: 소수점 숫자도 입력할 수 있습니다!");
}
```

**메뉴 설계의 원칙:**
- **일관성**: 메뉴 번호와 기능이 논리적으로 연결됩니다
- **명확성**: 각 메뉴 항목이 무엇을 하는지 분명합니다
- **피드백**: 사용자의 선택에 대한 결과를 즉시 보여줍니다
- **오류 처리**: 잘못된 입력에 대한 안내 메시지를 제공합니다

---

## 19.4 예외 처리 및 유효성 검증

실제 프로그램에서는 사용자가 예상치 못한 입력을 할 수 있습니다. **방어적 프로그래밍(Defensive Programming)**을 통해 모든 예외 상황을 처리해야 합니다.

### 숫자 입력의 유효성 검증

`double.Parse()`는 숫자가 아닌 문자열이 입력되면 예외를 발생시킵니다. `TryParse()`를 사용하여 안전하게 처리합니다:

```csharp
double GetNumberInput(string prompt)
{
    while (true)
    {
        Console.Write(prompt);
        string input = Console.ReadLine();
        
        if (double.TryParse(input, out double result))
        {
            return result;
        }
        
        Console.WriteLine("❌ 올바른 숫자를 입력하세요.");
    }
}

// 사용 예시
double num1 = GetNumberInput("첫 번째 숫자: ");
double num2 = GetNumberInput("두 번째 숫자: ");
```

**실행 예시:**
```
첫 번째 숫자: abc
❌ 올바른 숫자를 입력하세요.
첫 번째 숫자: 12.5
두 번째 숫자: 3
```

### 0으로 나누기 방지

나눗셈 연산 시 0으로 나누는 경우를 반드시 검사해야 합니다:

```csharp
double SafeDivide(double a, double b)
{
    if (b == 0)
    {
        Console.WriteLine("❌ 오류: 0으로 나눌 수 없습니다.");
        return 0; // 또는 특별한 값 반환
    }
    return a / b;
}

// 또는 예외를 발생시키는 방식
double Divide(double a, double b)
{
    if (b == 0)
    {
        throw new DivideByZeroException("0으로 나눌 수 없습니다.");
    }
    return a / b;
}
```

### 종합적인 예외 처리

모든 연산 과정에서 발생할 수 있는 예외를 처리합니다:

```csharp
void PerformSafeCalculation()
{
    try
    {
        Console.WriteLine("\n[ 계산하기 ]");
        
        double num1 = GetNumberInput("첫 번째 숫자: ");
        
        Console.Write("연산자 (+, -, *, /): ");
        string op = Console.ReadLine()?.Trim();
        
        if (string.IsNullOrEmpty(op))
        {
            Console.WriteLine("❌ 연산자를 입력해주세요.");
            return;
        }
        
        double num2 = GetNumberInput("두 번째 숫자: ");
        
        // 0으로 나누기 검사
        if (op == "/" && num2 == 0)
        {
            Console.WriteLine("❌ 오류: 0으로 나눌 수 없습니다.");
            return;
        }
        
        double result = op switch
        {
            "+" => num1 + num2,
            "-" => num1 - num2,
            "*" => num1 * num2,
            "/" => num1 / num2,
            _ => throw new InvalidOperationException($"지원하지 않는 연산자: {op}")
        };
        
        Console.WriteLine($"✓ 결과: {num1} {op} {num2} = {result}");
    }
    catch (InvalidOperationException ex)
    {
        Console.WriteLine($"❌ 오류: {ex.Message}");
    }
    catch (Exception ex)
    {
        Console.WriteLine($"❌ 예상치 못한 오류: {ex.Message}");
    }
}

double GetNumberInput(string prompt)
{
    while (true)
    {
        Console.Write(prompt);
        string input = Console.ReadLine();
        
        if (double.TryParse(input, out double result))
        {
            return result;
        }
        
        Console.WriteLine("❌ 올바른 숫자를 입력하세요.");
    }
}
```

**예외 처리의 계층:**
1. **예방(Prevention)**: 입력 검증으로 예외가 발생하지 않도록 함
2. **감지(Detection)**: 예외 발생 시 적절히 포착
3. **복구(Recovery)**: 사용자가 작업을 계속할 수 있도록 함
4. **보고(Reporting)**: 명확한 오류 메시지 제공

---

## 19.5 연산 기록 기능

이전 계산 결과를 저장하고 조회하는 기능을 추가하면 계산기가 더욱 유용해집니다. **리스트(List<T>)**를 사용하여 기록을 관리합니다.

### 계산 기록 저장

각 계산 결과를 문자열로 저장합니다:

```csharp
List<string> history = new List<string>();

void PerformCalculationWithHistory()
{
    Console.WriteLine("\n[ 계산하기 ]");
    
    double num1 = GetNumberInput("첫 번째 숫자: ");
    
    Console.Write("연산자 (+, -, *, /): ");
    string op = Console.ReadLine()?.Trim();
    
    double num2 = GetNumberInput("두 번째 숫자: ");
    
    if (op == "/" && num2 == 0)
    {
        Console.WriteLine("❌ 0으로 나눌 수 없습니다.");
        return;
    }
    
    double result = op switch
    {
        "+" => num1 + num2,
        "-" => num1 - num2,
        "*" => num1 * num2,
        "/" => num1 / num2,
        _ => throw new InvalidOperationException("지원하지 않는 연산자")
    };
    
    // 기록에 추가
    string record = $"{num1} {op} {num2} = {result}";
    history.Add(record);
    
    Console.WriteLine($"✓ 결과: {record}");
}
```

### 기록 조회 기능

저장된 모든 계산 기록을 보여줍니다:

```csharp
void ShowHistory()
{
    Console.WriteLine("\n[ 계산 기록 ]");
    
    if (history.Count == 0)
    {
        Console.WriteLine("기록이 없습니다.");
        return;
    }
    
    Console.WriteLine("━━━━━━━━━━━━━━━━━━━━━━");
    for (int i = 0; i < history.Count; i++)
    {
        Console.WriteLine($"{i + 1}. {history[i]}");
    }
    Console.WriteLine("━━━━━━━━━━━━━━━━━━━━━━");
    Console.WriteLine($"총 {history.Count}개의 기록");
}
```

### 기록 관리 기능

기록을 지우는 기능도 추가합니다:

```csharp
void ClearHistory()
{
    Console.Write("\n정말로 모든 기록을 삭제하시겠습니까? (y/n): ");
    string confirm = Console.ReadLine()?.ToLower();
    
    if (confirm == "y" || confirm == "yes")
    {
        history.Clear();
        Console.WriteLine("✓ 모든 기록이 삭제되었습니다.");
    }
    else
    {
        Console.WriteLine("취소되었습니다.");
    }
}
```

### 완전한 계산기 프로그램

모든 기능을 통합한 최종 버전:

```csharp
// 전역 변수
List<string> history = new List<string>();

// 메인 프로그램
Console.WriteLine("╔═══════════════════════════╗");
Console.WriteLine("║   콘솔 계산기 v1.0       ║");
Console.WriteLine("╚═══════════════════════════╝");

while (true)
{
    Console.WriteLine("\n메뉴:");
    Console.WriteLine("  1. 계산하기");
    Console.WriteLine("  2. 계산 기록 보기");
    Console.WriteLine("  3. 기록 삭제");
    Console.WriteLine("  4. 도움말");
    Console.WriteLine("  5. 종료");
    Console.Write("선택: ");
    
    string choice = Console.ReadLine();
    
    switch (choice)
    {
        case "1":
            PerformCalculationWithHistory();
            break;
        case "2":
            ShowHistory();
            break;
        case "3":
            ClearHistory();
            break;
        case "4":
            ShowHelp();
            break;
        case "5":
            Console.WriteLine("\n계산기를 종료합니다. 안녕히 가세요!");
            return;
        default:
            Console.WriteLine("❌ 1-5 사이의 숫자를 선택하세요.");
            break;
    }
}

// 메서드들
void PerformCalculationWithHistory()
{
    try
    {
        Console.WriteLine("\n[ 계산하기 ]");
        
        double num1 = GetNumberInput("첫 번째 숫자: ");
        
        Console.Write("연산자 (+, -, *, /): ");
        string op = Console.ReadLine()?.Trim();
        
        if (string.IsNullOrEmpty(op) || !(op == "+" || op == "-" || op == "*" || op == "/"))
        {
            Console.WriteLine("❌ 올바른 연산자를 입력하세요 (+, -, *, /)");
            return;
        }
        
        double num2 = GetNumberInput("두 번째 숫자: ");
        
        if (op == "/" && num2 == 0)
        {
            Console.WriteLine("❌ 0으로 나눌 수 없습니다.");
            return;
        }
        
        double result = op switch
        {
            "+" => num1 + num2,
            "-" => num1 - num2,
            "*" => num1 * num2,
            "/" => num1 / num2,
            _ => 0
        };
        
        string record = $"{num1} {op} {num2} = {result}";
        history.Add(record);
        
        Console.WriteLine($"✓ {record}");
    }
    catch (Exception ex)
    {
        Console.WriteLine($"❌ 오류: {ex.Message}");
    }
}

double GetNumberInput(string prompt)
{
    while (true)
    {
        Console.Write(prompt);
        string input = Console.ReadLine();
        
        if (double.TryParse(input, out double result))
        {
            return result;
        }
        
        Console.WriteLine("❌ 올바른 숫자를 입력하세요.");
    }
}

void ShowHistory()
{
    Console.WriteLine("\n[ 계산 기록 ]");
    
    if (history.Count == 0)
    {
        Console.WriteLine("📝 아직 계산 기록이 없습니다.");
        return;
    }
    
    Console.WriteLine("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━");
    for (int i = 0; i < history.Count; i++)
    {
        Console.WriteLine($"  {i + 1}. {history[i]}");
    }
    Console.WriteLine("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━");
    Console.WriteLine($"📊 총 {history.Count}개의 계산 기록");
}

void ClearHistory()
{
    if (history.Count == 0)
    {
        Console.WriteLine("\n삭제할 기록이 없습니다.");
        return;
    }
    
    Console.Write($"\n정말로 {history.Count}개의 기록을 모두 삭제하시겠습니까? (y/n): ");
    string confirm = Console.ReadLine()?.ToLower();
    
    if (confirm == "y" || confirm == "yes")
    {
        history.Clear();
        Console.WriteLine("✓ 모든 기록이 삭제되었습니다.");
    }
    else
    {
        Console.WriteLine("취소되었습니다.");
    }
}

void ShowHelp()
{
    Console.WriteLine("\n[ 도움말 ]");
    Console.WriteLine("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━");
    Console.WriteLine("📖 콘솔 계산기 사용 방법");
    Console.WriteLine();
    Console.WriteLine("지원하는 연산:");
    Console.WriteLine("  • 덧셈 (+)");
    Console.WriteLine("  • 뺄셈 (-)");
    Console.WriteLine("  • 곱셈 (*)");
    Console.WriteLine("  • 나눗셈 (/)");
    Console.WriteLine();
    Console.WriteLine("기능:");
    Console.WriteLine("  • 계산 결과는 자동으로 기록에 저장됩니다");
    Console.WriteLine("  • 소수점 숫자를 입력할 수 있습니다");
    Console.WriteLine("  • 음수를 입력할 수 있습니다");
    Console.WriteLine();
    Console.WriteLine("💡 팁: 잘못 입력한 경우 다시 입력할 수 있습니다");
    Console.WriteLine("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━");
}
```

**실행 예시:**
```
╔═══════════════════════════╗
║   콘솔 계산기 v1.0       ║
╚═══════════════════════════╝

메뉴:
  1. 계산하기
  2. 계산 기록 보기
  3. 기록 삭제
  4. 도움말
  5. 종료
선택: 1

[ 계산하기 ]
첫 번째 숫자: 100
연산자 (+, -, *, /): /
두 번째 숫자: 4
✓ 100 / 4 = 25

메뉴:
  1. 계산하기
  2. 계산 기록 보기
  3. 기록 삭제
  4. 도움말
  5. 종료
선택: 2

[ 계산 기록 ]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  1. 100 / 4 = 25
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 총 1개의 계산 기록
```

---

## 19장 정리 및 요약

이 장에서는 지금까지 배운 C#의 다양한 개념들을 통합하여 실용적인 콘솔 계산기를 만들어 보았습니다.

### 핵심 개념 정리

**1. 요구사항 분석**
- 프로그램을 만들기 전에 무엇을 만들지 명확히 정의
- 큰 문제를 작은 단계로 나누어 접근 (증분 개발)
- 의사코드와 순서도로 흐름 설계

**2. 기본 연산 구현**
- 사용자 입력을 받아 처리 (`Console.ReadLine()`, `double.Parse()`)
- `switch` 문과 switch 식으로 연산자 처리
- 메서드로 기능을 분리하여 가독성과 재사용성 향상

**3. 메뉴 시스템**
- `while (true)` 루프로 반복 실행
- 사용자 선택에 따라 다른 기능 실행
- 명확하고 직관적인 인터페이스 제공

**4. 예외 처리**
- `TryParse()`로 안전한 입력 검증
- 0으로 나누기 등 특수 상황 처리
- `try-catch`로 예외를 잡아 프로그램 안정성 확보

**5. 연산 기록**
- `List<string>`으로 계산 결과 저장
- 기록 조회 및 관리 기능
- 사용자 확인 메시지로 실수 방지

### 프로그래밍 원칙

이 프로젝트를 통해 배운 중요한 프로그래밍 원칙:

**단순함에서 복잡함으로 (Incremental Development)**
- 작동하는 간단한 버전부터 시작
- 한 번에 하나의 기능씩 추가
- 각 단계마다 테스트

**방어적 프로그래밍 (Defensive Programming)**
- 사용자가 무엇을 입력할지 예측 불가
- 모든 입력을 검증
- 오류 발생 시 명확한 메시지 제공

**코드 구조화 (Code Organization)**
- 메서드로 기능 분리
- 관련된 코드를 함께 배치
- 의미 있는 이름 사용

**사용자 경험 (User Experience)**
- 직관적인 메뉴 구조
- 명확한 안내 메시지
- 오류 시 재시도 기회 제공

### 확장 아이디어

이 계산기를 더욱 발전시킬 수 있는 방법:

**1. 더 많은 연산 추가**
- 제곱, 제곱근, 삼각함수
- 팩토리얼, 조합, 순열
- 단위 변환 (온도, 길이, 무게 등)

**2. 기록 관리 개선**
- 파일에 기록 저장 및 불러오기 (13장 참고)
- 특정 기록 삭제
- 기록 검색 및 필터링

**3. 고급 기능**
- 수식 파싱 (예: "2 + 3 * 4" 한 번에 계산)
- 변수 저장 및 사용 (예: "x = 10", "x + 5")
- 그래프 그리기 (ASCII 아트)

**4. 사용자 경험 개선**
- 색상 있는 출력 (`Console.ForegroundColor`)
- 통계 정보 (평균, 최댓값, 최솟값)
- 테마 및 설정 저장

### 다음 단계

이제 여러분은 실용적인 프로그램을 만들 수 있는 기초를 다졌습니다. 다음 장에서는 더 복잡한 프로젝트인 **할 일 관리 앱**을 만들어 보며, 파일 입출력, 데이터 모델, LINQ 등을 활용하는 방법을 배울 것입니다.

**실습 과제:**

1. 계산기에 새로운 연산(제곱, 나머지 등)을 추가해보세요
2. 계산 기록을 파일에 저장하고 불러오는 기능을 구현해보세요
3. 사용자가 연속으로 계산할 수 있도록 "이전 결과 사용" 기능을 추가해보세요
4. 잘못된 입력에 대한 더 상세한 오류 메시지를 추가해보세요

이 장에서 만든 계산기는 여러분의 첫 번째 완전한 프로그램입니다. 작은 시작이지만, 여기서 배운 원칙들은 앞으로 만들 모든 프로그램의 기초가 될 것입니다!
